# 인터럽트란?
+ 프로세스 실행 도중 예기치 않은 상황이 발생할 때 방생한 상황을 처리한 후 실행중인 작업으로 복귀하는 것을 말함

## 인터럽트 종류
+ 비동기적 인터럽트(하드웨어 인터럽트)
++ 전원 이상, 기계 착오, 외부 신호, 입출력 등 프로세스 외부에서 발새하는 인터럽트
+ 동기적 인터럽트(소프트웨어 인터럽트)
++ 프로세스 내부에서 잘못된 명령어, 데이터로 exception이 발생하는 것이며 trap이라고 불림

#### 참고사항
+ 인터럽트 함수 내에서 delay()는 작동하지 않으며 millis()에서 반환 된 값이 증가하지 않음
+ 첨부 된 함수 내에서 수정하는 모든 변수는 휘발성 변수로 선언해야함

![image](https://github.com/user-attachments/assets/0c3a8176-1d90-4766-98c5-78b1a0e5e7d5)


## 인터럽트 사용
+ 타이밍 문제를 해결하는데 유용함
++ 로터리 엔코더에서 *펄스가 발생했을때 지속적으로 센서를 폴링해야하므로 다른 작업을 수행하는 프로그램 작성이 까다로움
++ 클릭을 잡으려는 사운드 센서, 또는 동전 떨어짐을 잡으려는 적외선 슬롯 센서 (포토 인터럽터)들을 읽는 경우 등

## ISR (Interrupt Service Routines) 정보
+ ISR은 대부분의 다른 함수에 없는 몇 가지 고유한 제한이 있는 특수한 함수
+ ISR은 매개 변수를 가질 수 없으며 아무것도 반환하지 않아야함
+ ISR은 빨리 끝나야함
+ 스캐치가 여러 ISR을 사용하는 경우 한번에 하나만 실행할 수 있으며 다른 인터럽트는 우선순위에 따라 달라지는 순서로 실행됨
++ millis()카운트를 위해 인터럽트에 의존하므로 ISR 내에서 절대 증가하지 않습니다. 
++ delay()작동하려면 인터럽트가 필요 하기 때문에 ISR 내에서 호출되면 작동하지 않습니다. 
++ micros()처음에는 작동하지만 1-2ms 후에 비정상적으로 작동하기 시작합니다. 
++delayMicroseconds()카운터를 사용하지 않으므로 정상적으로 작동합니다.

+ 일반적으로 전역 변수는 ISR과 기본 프로그램간에 데이터를 전달하는 데 사용됨.


## Syntax(구문)
+ attachInterrupt(digitalPinToInterrupt(pin), ISR, mode)(권장)
+ attachInterrupt(interrupt, ISR, mode)(권장되지 않음 ) 
+ attachInterrupt(pin, ISR, mode)(권장되지 않음. 또한이 구문은 Arduino SAMD 보드, Uno WiFi Rev2, Due 및 101에서만 작동합니다.)

## 매개 변수
+ interrupt: 인터럽트 번호,  data type : int.
+ pin: Arduino 핀 번호.
+ ISR: 인터럽트 발생시 호출 할 ISR, 이 함수는 매개 변수를 취하지 않고 아무것도 반환하지 않아야합니다. 이 함수를 인터럽트 서비스 루틴(Interupt Sevice Routine)이라고합니다.
+ mode: 인터럽트가 트리거되어야하는시기를 정의합니다. 4 개의 상수가 유효한 값으로 미리 정의되어 있습니다.
++ LOW :  핀이 LOW일 될 때마다 
++ CHANGE : 핀의 값이 변경 될 때마다 
++ RISING : 핀이 LOW에서 HIGH로 갈 때 
++ FALLING : 핀이 HIGH에서 LOW로 갈 때

### 리턴값
+ 없음

## 인터럽트 번호
+ 인터럽트 번호를 직접 입력하는 대신에 일반적으로 digitalPinToInterrupt(pin)를  사용해야 합니다. 인터럽트가있는 특정 핀과 인터럽트 번호에 대한 매핑은 각 보드 유형에 따라 다릅니다. 인터럽트 번호를 직접 사용하는 것은 간단 해 보일 수 있지만 스케치가 다른 보드에서 실행될 때 호환성 문제를 일으킬 수 있습니다. 그러나 오래된 스케치에는 종종 직접적인 인터럽트 번호가 있습니다. 종종 숫자 0 (디지털 핀 2의 경우) 또는 숫자 1 (디지털 핀 3의 경우)이 사용되었습니다. 아래 표는 다양한 보드에서 사용 가능한 인터럽트 핀을 보여줍니다. 아래 표에서 인터럽트 번호는 전달 될 번호를 나타 attachInterrupt()냅니다. 역사적 이유로 이 번호는 ATmega 칩의 인터럽트 번호와 항상 일치하지는 않습니다 (예 : int.0은 ATmega2560 칩의 INT4에 해당)


![image](https://github.com/user-attachments/assets/ce332dbd-ceae-4ea0-b613-f2a8af6463b9)
