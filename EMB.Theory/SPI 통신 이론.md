# SPI 통신이란?
+ I2C, CAN, UART와 같은 시리얼 통신 방식 중 한가지로 마이크로컨트롤러와 주변장치 사이에 데이터를 주고 받을때 사용되는 통신
+ 클럭신호와 데이터신호를 위한 선이 따로 분리되어 있고, 특이하게 통신할 장치를 선택할 수 있다


## SPI 통신의 특징
+ SPI 통신은 동기식으로 작동
  + SPI 통신에서는 별도로 클럭 선을 두어서 완벽하게 송수신 타이밍을 맞춤
  + 클럭신호에 따라 데이터가 추출 되기에 사전에 속도를 맞출 필요도 없음
+ UART 보다 더 저렴함
+ 단방향 통신에 최적
+ 한쪽에서만 클럭 신호를 생성
+ 클럭신호를 생성하는 쪽을 Master라고 하고 반대쪽은 slave라고 부른다.
  + 마스터는 하나이다
  + 슬레이브는 여러개가 있을수 있다.
+ SPI는 전이중 통신이다
  + 전이중 통신이라는 건 데이터를 전송하는 동시에 수신할 수 있는 통신.
+ 각각의 슬레이브는 일반적으로 독립된 SS선을 가지고 있다.

## 데이터 수신
+ 마스터에서 슬레이브로 데이터를 보내면 신호는 MOSI이라고 불리는 데이터 선으로 내보내진다
+ 슬레이브가 마이터에게 응답을 보낼 준비가 되어 있으면 마스터는 미리 정해진 사이클수의 클록을 생성하고 슬레이브는 MISO라는 선으로 데이터를 내보냄
  + 클록을 생성하는건 언제나 마스터이기 때문에 슬레이브가 데이터를 보내려하면 데이터를 언제 보낼지와 양을 알아야 됨

## 슬레이브 선택
+ 슬레이브 선택은 데이터 송신을 미리 알려서 준비 할 수 있게 하는 역할도 하고 여러 슬레이브 중에 하나를 선택해서 통신할 때도 사용된다
+ 슬레이브 선택은 평소에는 HIGH를 유지고 있다
  + HIGI 일경우 슬레이브로 부터 해제된 상태
  + LOW 일경우 연결되어 있는 슬레이브가 활성화 된 상태가 됨.
  + 시프트레지스터의 latch핀과 동일한 역할 수행

### 다중 슬레이브 통신
+ 특정 슬레이브와 통신을 하려면 원하는 슬레이브와 연결된 선만을 LOW신호를 주고 다른 슬레이브와 연결된 선들은 HIGH 상태로 유지해야함
+ 이진 디코더를 활용하면 SS출력을 다중화 할 수 있음.
+ 연속적으로 데이지 체인식으로 연결이 가능한경우는 MISO를 다음 부품의 MOSI로 보낼 수 있다.
  + 이 경우는 하나의 SS선을 모든 슬레이브와 연결되게 하고, 데이터가 전송될때마다 SS선의 신호도 같이 HIGH로 유지하게 된다
    + 데이지 체인화된 시프트레지스터나 LED 스트립을 구동할때 사용된다.
+ 사용시 주의할 점
  + 충분한 길이의 자료를 전송해야함
  + 데이지 체인식 연결은 데이터를 전송받지 않아도 되는 LED 구동과 같은 데 사용.
  + 마스터에게 자료를 돌려줘야하는 경우 데이지 체인을 고리구조로 만들어야함
