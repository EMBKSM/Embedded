# I2C 통신이란?

**I2C**(Inter-Integrated Circuit)는 IC 간 통신 링크를 제공하는 양방향 2와이어 직렬 통신 프로토콜입니다.  
두 가닥의 신호선(SDA, SCL)을 사용하여 데이터를 직렬로 전송하며, 간단하고 효율적인 통신 방식을 제공합니다.

---

## I2C의 구성 요소

1. **마스터**  
   - 통신을 주도하는 역할을 하며, 데이터 전송 및 슬레이브 제어를 담당합니다.  

2. **슬레이브**  
   - 마스터와 연결되어 데이터를 송수신하는 장치입니다.  
   - 최대 127개의 슬레이브 디바이스를 연결할 수 있습니다.  
![image](https://github.com/user-attachments/assets/410156f1-cf76-48b1-b867-be438975a455)
---

## I2C 신호선

### 1. SDA (Serial Data Line)  
- 데이터의 송수신을 담당하는 신호선입니다.

### 2. SCL (Serial Clock Line)  
- 데이터 전송 시 타이밍을 동기화하는 클럭 신호선입니다.

---

## I2C 통신의 특징

### 1. 풀업 저항
- SDA와 SCL 선에는 풀업 저항이 필요합니다.  
  - **역할:**  
    - I2C 통신에서는 SDA와 SCL 신호가 기본적으로 **High** 상태를 유지해야 하므로 풀업 저항을 통해 이를 구현합니다.  
    - 또한, 한 선에서 송신(Tx) 및 수신(Rx)을 겸하기 때문에 **Floating 현상** 방지를 위해 풀업 저항이 필요합니다.  
  - **주의:**  
    - 아두이노와 같은 일부 마이크로컨트롤러는 내부 풀업 저항을 제공하므로, 별도로 저항을 추가하지 않아도 됩니다.

---

### 2. 데이터 전송 프로세스
1. **기본 상태:**  
   - SDA와 SCL은 풀업 저항에 의해 기본적으로 High 상태를 유지합니다.

2. **시작 신호(Start Condition):**  
   - SDA가 High에서 Low로 전환될 때 SCL이 High 상태인 경우, 통신이 시작됩니다.

3. **데이터 전송:**  
   - SCL이 High 상태일 때 SDA 값을 읽어 데이터를 전송합니다.  
   - SCL이 Low 상태일 때 비트 신호가 처리되고, 다시 High로 전환되어 다음 데이터를 읽습니다.

4. **정지 신호(Stop Condition):**  
   - 모든 비트의 전송이 끝난 후, SCL이 High 상태일 때 SDA도 High로 전환되면 통신이 종료됩니다.

5. **슬레이브 주소:**  
   - 시작 신호 뒤에 나오는 첫 7비트는 슬레이브의 주소값을 나타냅니다.  
   - 8번째 비트는 데이터를 **읽기(Read)** 또는 **쓰기(Write)** 모드로 설정하는 신호입니다.
![image](https://github.com/user-attachments/assets/7a5ba25c-b68f-4f80-a2e2-b650a064c2aa)
---

### 3. 응답 신호 (ACK/NACK)
- **ACK (Acknowledgment):**  
  - 슬레이브가 데이터를 정상적으로 수신했음을 알리기 위해 **Low 신호**를 전송합니다.

- **NACK (Negative Acknowledgment):**  
  - 통신 오류 또는 데이터 전송이 완료된 경우 **High 신호**를 전송합니다.

---

## I2C의 장점 (UART 대비)
- **동기식 통신:**  
  - 클럭 신호(SCL)를 사용해 데이터를 동기화하여 전송하므로, 별도의 통신 속도(Baudrate) 설정이 필요하지 않습니다.  

- **멀티슬레이브 지원:**  
  - 한 마스터가 최대 127개의 슬레이브와 통신 가능하여 복잡한 장치 간 네트워크를 구성할 수 있습니다.

- **간단한 배선:**  
  - SDA와 SCL 두 가닥의 신호선만으로 통신을 구성할 수 있어 배선이 간단합니다.

---

## I2C 쓰기/읽기 동작

### 1. 쓰기 (Write)
- 마스터에서 슬레이브의 주소와 데이터를 생성하여 전송합니다.
- 슬레이브는 데이터 수신 후 **ACK 신호**를 반환하여 데이터 수신 상태를 확인합니다.

### 2. 읽기 (Read)
- 마스터가 슬레이브의 주소와 데이터를 요청합니다.  
- 슬레이브는 데이터를 생성하여 마스터에 전송하고, 데이터가 모두 전송되면 **NACK 신호**를 반환하여 종료를 알립니다.
![image](https://github.com/user-attachments/assets/10a88d49-5a45-4e7a-8112-481d72733dd8)
---

## 용어 설명

1. **ECU (Electronic Control Unit):**  
   - 전자제어유닛으로, 자동차 및 전자 장비의 주요 제어 장치입니다.

2. **Tx, Rx:**  
   - **Tx:** 송신(Transmit)  
   - **Rx:** 수신(Receive)  

3. **NACK:**  
   - 부정 응답 문자(negative acknowledgment code)로, 통신 오류 또는 데이터 전송 완료를 의미합니다.

---

## 참고 자료
- [I2C 통신 이해하기](https://mickael-k.tistory.com/184)






